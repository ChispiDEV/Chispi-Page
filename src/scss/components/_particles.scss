// src/scss/components/_particles.scss
@use '../abstracts/variables' as v;

// ===== PARTÍCULAS CON VARIABLES CSS =====
.particles-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0; 
  pointer-events: none;
  opacity: var(--particles-opacity, 0.6);

  canvas {
    display: block;
    width: 100%;
    height: 100%;
    background: transparent !important; // Fuerza transparencia
    transition: opacity 0.5s ease-in-out;
  }

  // Efecto de desvanecimiento al hacer hover en contenido
  .content-area:hover ~ &,
  &.particles-dimmed {
    opacity: calc(var(--particles-opacity, 0.6) * 0.4);
  }

  // Reducir movimiento para accesibilidad
  @media (prefers-reduced-motion: reduce) {
    --particles-speed: 0.1;

    canvas {
      animation: none !important;
      transition: none !important;
    }
  }

  // Partículas más sutiles en móviles para mejor rendimiento
  @media (max-width: #{v.$breakpoint-md}) {
    opacity: calc(var(--particles-opacity, 0.6) * 0.7);

    // Reducir aún más en móviles con hover
    .content-area:hover ~ & {
      opacity: calc(var(--particles-opacity, 0.6) * 0.3);
    }
  }

  // Para pantallas muy pequeñas, desactivar completamente
  @media (max-width: 480px) and (prefers-reduced-motion: reduce) {
    display: none;
  }
}

// Estados especiales para las partículas
.particles-active {
  // Efectos sutiles cuando las partículas están activas
  .particles-container {
    opacity: var(--particles-opacity, 0.6);
  }
}

// Cuando el usuario está interactuando con el contenido
.content-focused {
  .particles-container {
    opacity: calc(var(--particles-opacity, 0.6) * 0.4);
    transition: opacity 0.3s ease;
  }
}

// Modo minimalista
.particles-minimal {
  --particles-opacity: 0.3;
  --particles-count: 20;

  .particles-container {
    opacity: var(--particles-opacity);
  }
}

// Modo alto contraste para accesibilidad
.particles-high-contrast {
  --particles-opacity: 0.1;
  --particles-count: 15;
}

// Estados de rendimiento
.particles-performance {
  --particles-count: 25;
  --particles-speed: 0.3;
}